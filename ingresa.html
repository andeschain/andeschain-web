<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AndesChain | Captura de Origen Directa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --emerald: #10B981; --slate-900: #0F172A; --bg: #0F172A; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: white; }
        .camera-view { position: relative; width: 100%; height: 75vh; background: #000; overflow: hidden; border-radius: 0 0 40px 40px; }
        .scan-line { position: absolute; width: 100%; height: 2px; background: rgba(16, 185, 129, 0.5); top: -2px; left: 0; pointer-events: none; }
        .scanning .scan-line { animation: scan 2s linear infinite; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .data-badge { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 8px 12px; }
        .shutter-btn { width: 70px; height: 70px; border-radius: 50%; border: 5px solid white; display: flex; items-center; justify-center; transition: all 0.2s; }
        .shutter-btn:active { transform: scale(0.9); }
        .shutter-inner { width: 50px; height: 50px; background: white; border-radius: 50%; }
        .step-hidden { display: none; }
    </style>
</head>
<body class="antialiased">

    <main id="camera-interface">
        <div class="camera-view shadow-2xl" id="camera-container">
            <img id="camera-stream" src="https://images.unsplash.com/photo-1625246333195-78d9c38ad449?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover opacity-80">
            
            <div class="scan-line"></div>

            <div class="absolute top-10 left-6 right-6 flex justify-between items-start">
                <div class="data-badge">
                    <p class="text-[8px] font-bold text-emerald-400 uppercase tracking-widest mb-1">GPS Satelital</p>
                    <p class="text-xs font-mono" id="live-gps">Buscando señal...</p>
                </div>
                <div class="data-badge text-right">
                    <p class="text-[8px] font-bold text-emerald-400 uppercase tracking-widest mb-1">Status</p>
                    <p class="text-xs font-mono">LIVE_STREAM</p>
                </div>
            </div>

            <div class="absolute bottom-10 left-6 right-6 grid grid-cols-2 gap-4">
                <div class="data-badge">
                    <p class="text-[8px] font-bold text-slate-400 uppercase tracking-widest mb-1 italic">Temperatura Amb.</p>
                    <p class="text-lg font-black" id="live-temp">--°C</p>
                </div>
                <div class="data-badge">
                    <p class="text-[8px] font-bold text-slate-400 uppercase tracking-widest mb-1 italic">Altitud</p>
                    <p class="text-lg font-black" id="live-alt">--- m</p>
                </div>
            </div>
        </div>

        <div class="p-8 flex flex-col items-center gap-6">
            <p class="text-[10px] text-slate-400 uppercase font-bold tracking-[0.3em]">Hito: Cosecha Lote 001</p>
            <div class="flex items-center gap-12">
                <button class="text-white text-xl opacity-50"><i class="fas fa-bolt"></i></button>
                <button class="shutter-btn" onclick="captureAndRecollect()">
                    <div class="shutter-inner"></div>
                </button>
                <button class="text-white text-xl opacity-50"><i class="fas fa-sync"></i></button>
            </div>
            <p class="text-[9px] text-slate-500 italic">Toca el obturador para recopilar evidencia inmutable.</p>
        </div>
    </main>

    <section id="processing-view" class="step-hidden flex flex-col items-center justify-center h-screen p-12 text-center">
        <div class="w-24 h-24 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mb-8"></div>
        <h2 class="text-3xl font-bold mb-4 tracking-tighter">Recopilando Origen...</h2>
        <div class="space-y-3 w-full max-w-xs text-left">
            <p class="text-[10px] text-emerald-400 font-mono flex justify-between"><span>> GPS_COORDINATES:</span> <span id="log-gps">CAPTURED</span></p>
            <p class="text-[10px] text-emerald-400 font-mono flex justify-between"><span>> AMBIENT_TEMP:</span> <span id="log-temp">CAPTURED</span></p>
            <p class="text-[10px] text-emerald-400 font-mono flex justify-between"><span>> BLOCKCHAIN_HASH:</span> <span>PENDING</span></p>
        </div>
    </section>

    <section id="success-view" class="step-hidden flex flex-col items-center justify-center h-screen p-12 text-center">
        <div class="w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center mb-8 shadow-2xl shadow-emerald-500/20">
            <i class="fas fa-check text-3xl"></i>
        </div>
        <h2 class="text-3xl font-bold mb-2 tracking-tighter">Éxito en Polygon</h2>
        <p class="text-sm text-slate-400 font-light mb-12 italic">Juan, el hito ha sido acuñado. La FOD ya es pública.</p>
        <button onclick="location.reload()" class="bg-white text-slate-900 px-8 py-3 rounded-full font-bold text-xs uppercase tracking-widest">Siguiente Lote</button>
    </section>

    <script>
        // Simulación de búsqueda de GPS al cargar
        setTimeout(() => {
            document.getElementById('live-gps').innerText = "-33.8112, -70.7510";
        }, 1500);

        function captureAndRecollect() {
            const container = document.getElementById('camera-container');
            container.classList.add('scanning');
            
            // Simulación de recopilación de nuevos datos al momento de la foto
            setTimeout(() => {
                const temp = (22 + Math.random() * 5).toFixed(1);
                const alt = 415 + Math.floor(Math.random() * 10);
                
                document.getElementById('live-temp').innerText = temp + "°C";
                document.getElementById('live-alt').innerText = alt + " m";
                
                // Transición a procesamiento
                setTimeout(() => {
                    document.getElementById('camera-interface').classList.add('step-hidden');
                    document.getElementById('processing-view').classList.remove('step-hidden');
                    
                    // Finalizar a éxito
                    setTimeout(() => {
                        document.getElementById('processing-view').classList.add('step-hidden');
                        document.getElementById('success-view').classList.remove('step-hidden');
                    }, 2500);
                }, 1000);
            }, 500);
        }
    </script>
</body>
</html>
