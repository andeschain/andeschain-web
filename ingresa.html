<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AndesChain App | Captura de Evidencia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --emerald: #10B981; --slate-900: #0F172A; --bg: #F8FAFC; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--slate-900); }
        .glass-card { background: white; border-radius: 28px; border: 1px solid #f1f5f9; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
        .sensor-tag { background: rgba(16, 185, 129, 0.1); color: #065f46; padding: 4px 10px; border-radius: 8px; font-size: 10px; font-weight: 700; display: flex; items-center; gap: 4px; }
        .step-inactive { display: none; }
        .camera-overlay { background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 100%); }
    </style>
</head>
<body class="pb-24">

    <header class="bg-white p-6 border-b border-gray-100 sticky top-0 z-50 flex justify-between items-center">
        <div>
            <p class="text-[10px] font-black text-emerald-500 uppercase tracking-widest">AndesChain App</p>
            <h1 class="text-xl font-bold">Panel de Juan</h1>
        </div>
        <div class="sensor-tag">
            <i class="fas fa-satellite"></i> GPS Activo
        </div>
    </header>

    <main class="p-6 max-w-md mx-auto">

        <section id="section-hito" class="space-y-6">
            <div class="flex items-center justify-between">
                <button onclick="window.location.reload()" class="text-slate-400 text-xs font-bold uppercase"><i class="fas fa-arrow-left mr-2"></i> Volver</button>
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Lote: Papa Desirée #001</span>
            </div>
            
            <div class="glass-card overflow-hidden">
                <div class="relative aspect-square bg-slate-900 flex items-center justify-center group cursor-pointer" onclick="captureData()">
                    <img id="preview-img" src="https://images.unsplash.com/photo-1518977676601-b53f02bad67b?auto=format&fit=crop&q=80&w=600" class="w-full h-full object-cover opacity-60">
                    
                    <div class="camera-overlay absolute bottom-0 left-0 w-full p-6 text-white">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="flex flex-col">
                                <span class="text-[8px] opacity-60 uppercase font-bold">Coordenadas GPS</span>
                                <span class="text-xs font-mono" id="val-gps">-33.8118, -70.7513</span>
                            </div>
                            <div class="flex flex-col items-end">
                                <span class="text-[8px] opacity-60 uppercase font-bold">Altitud</span>
                                <span class="text-xs font-mono" id="val-alt">420 msnm</span>
                            </div>
                            <div class="flex flex-col mt-2">
                                <span class="text-[8px] opacity-60 uppercase font-bold text-emerald-400">Temperatura Amb.</span>
                                <span class="text-xl font-black text-emerald-400" id="val-temp">24.5°C</span>
                            </div>
                            <div class="flex flex-col items-end mt-2">
                                <span class="text-[8px] opacity-60 uppercase font-bold text-blue-400">Humedad Suelo</span>
                                <span class="text-xl font-black text-blue-400">18%</span>
                            </div>
                        </div>
                    </div>

                    <div id="shutter-text" class="absolute inset-0 flex items-center justify-center">
                        <div class="bg-white/20 backdrop-blur-md p-4 rounded-full border border-white/30">
                            <i class="fas fa-camera text-3xl text-white"></i>
                        </div>
                    </div>
                </div>

                <div class="p-6 space-y-4">
                    <p class="text-xs text-slate-500 italic">Al capturar la foto, AndesChain vincula automáticamente el clima de Paine y tu ubicación exacta al bloque de Polygon.</p>
                    
                    <select id="hito-type" class="w-full p-4 bg-slate-50 rounded-2xl text-sm font-bold border-none outline-none focus:ring-2 focus:ring-emerald-500">
                        <option value="siembra">Hito: Registro de Siembra</option>
                        <option value="manejo">Hito: Aplicación Agroecológica</option>
                        <option value="cosecha">Hito: Cosecha Lote Final</option>
                    </select>

                    <button onclick="processBlockchain()" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-bold text-lg shadow-xl shadow-slate-200 flex items-center justify-center gap-3">
                        <i class="fas fa-link text-emerald-400"></i> Sincronizar con Polygon
                    </button>
                </div>
            </div>

            <div class="p-4 bg-slate-100 rounded-2xl space-y-2">
                <p class="text-[9px] font-bold text-slate-400 uppercase tracking-widest text-center mb-2">Metadata de Auditoría (EXIF + API)</p>
                <div class="flex justify-between text-[10px] text-slate-500 font-mono">
                    <span>DEVICE_ID:</span> <span>PX-772_PAINE</span>
                </div>
                <div class="flex justify-between text-[10px] text-slate-500 font-mono">
                    <span>WEATHER_API:</span> <span>Clear Sky / No Rain</span>
                </div>
            </div>
        </section>

        <section id="section-success" class="step-inactive py-20 text-center space-y-6">
            <div class="w-20 h-20 bg-emerald-500 text-white rounded-full flex items-center justify-center text-3xl mx-auto shadow-2xl shadow-emerald-200">
                <i class="fas fa-check"></i>
            </div>
            <h2 class="text-3xl font-black tracking-tight leading-none">Verdad Digital <br>Acuñada.</h2>
            <p class="text-sm text-slate-500 font-light px-6 leading-relaxed">
                Juan, los datos de georeferencia y temperatura han sido encriptados. <br>
                <strong class="text-slate-900">Hash: 0x34fe...60611</strong>
            </p>
            <button onclick="window.location.reload()" class="bg-slate-100 text-slate-900 px-10 py-4 rounded-full font-bold text-xs uppercase tracking-widest">Registrar Nuevo Hito</button>
        </section>

    </main>

    <script>
        function captureData() {
            // Animación de obturador
            const shutter = document.getElementById('shutter-text');
            shutter.innerHTML = '<i class="fas fa-sync-alt animate-spin text-3xl text-white"></i>';
            
            // Simular variación de sensores al "tomar la foto"
            setTimeout(() => {
                document.getElementById('val-temp').innerText = (24 + Math.random()).toFixed(1) + "°C";
                document.getElementById('val-gps').innerText = "-33.81" + Math.floor(Math.random()*90) + ", -70.75" + Math.floor(Math.random()*90);
                shutter.innerHTML = '<i class="fas fa-check text-3xl text-emerald-400"></i>';
                shutter.parentElement.style.borderColor = "#10B981";
            }, 800);
        }

        function processBlockchain() {
            const btn = event.currentTarget;
            btn.innerHTML = '<i class="fas fa-satellite-dish animate-pulse"></i> Transmitiendo a la Red...';
            
            setTimeout(() => {
                document.getElementById('section-hito').classList.add('step-inactive');
                document.getElementById('section-success').classList.remove('step-inactive');
            }, 2000);
        }
    </script>
</body>
</html>
